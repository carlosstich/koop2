var proj4 = require('proj4')
var _ = require('lodash')
var transformCoordinates = require('./transform-coordinates')

module.exports = function projectCoordinates (coordinates, options) {
  if ( options === void 0 ) options = {};

  var fromSR = options.fromSR || 'EPSG:4326'
  var toSR = options.toSR || 'EPSG:3857'
  if (fromSR === toSR) { return coordinates }

  return transformCoordinates(coordinates, { fromSR: fromSR, toSR: toSR }, function (coordinates, options) {
    if (_.isNumber(coordinates[0]) && _.isNumber(coordinates[1])) {
      return proj4(options.fromSR, options.toSR, coordinates)
    } else {
      return coordinates
    }
  })
}
